@import "tailwindcss";
@import "tw-animate-css";

/* ============================================================
   THEME CONFIG
============================================================ */

@custom-variant dark (&:is(.dark *));

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-destructive: var(--destructive);

  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);

  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
}

/* ============================================================
   LIGHT MODE
============================================================ */

:root {
  --radius: 0.75rem;

  --background: oklch(0.985 0.003 250);
  --card: oklch(0.995 0.002 250);
  --popover: oklch(0.995 0.002 250);

  --foreground: oklch(0.2 0.015 250);
  --card-foreground: oklch(0.2 0.015 250);
  --popover-foreground: oklch(0.2 0.015 250);

  --muted: oklch(0.955 0.004 250);
  --muted-foreground: oklch(0.45 0.015 250);

  --primary: oklch(0.35 0.03 250);
  --primary-foreground: oklch(0.99 0.002 250);

  --border: oklch(0.88 0.004 250);
  --input: oklch(0.94 0.004 250);
  --ring: oklch(0.55 0.025 250);

  --destructive: oklch(0.6 0.22 25);
}

/* ============================================================
   DARK MODE
============================================================ */

.dark {
  --background: oklch(0.17 0.015 250);
  --card: oklch(0.21 0.015 250);
  --popover: oklch(0.21 0.015 250);

  --foreground: oklch(0.92 0.005 250);
  --card-foreground: oklch(0.92 0.005 250);
  --popover-foreground: oklch(0.92 0.005 250);

  --muted: oklch(0.26 0.015 250);
  --muted-foreground: oklch(0.62 0.015 250);

  --primary: oklch(0.72 0.035 250);
  --primary-foreground: oklch(0.18 0.015 250);

  --border: oklch(1 0 0 / 10%);
  --input: oklch(1 0 0 / 12%);
  --ring: oklch(0.6 0.035 250);

  --destructive: oklch(0.7 0.18 25);
}

/* ============================================================
   BASE
============================================================ */

@layer base {
  * {
    border-color: var(--border);
  }

  body {
    @apply bg-background text-foreground antialiased;
  }

  input {
    background-color: var(--input);
    border-radius: var(--radius);
  }

  input:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px var(--ring);
  }
}

/* ============================================================
   LAYOUT UTILITIES
============================================================ */

@layer utilities {
  .page-weather {
    min-height: 100vh;
    background:
      linear-gradient(
        180deg,
        oklch(from var(--background) l c h) 0%,
        oklch(from var(--background) calc(l - 0.015) c h) 100%
      );
  }

  .search-container {
    @apply sticky top-0 z-10 transition-all duration-500 ease-in-out;
    backdrop-filter: blur(10px);
    background-color: oklch(from var(--background) l c h / 0.9);
  }

  .search-container--centered {
    @apply pt-40 pb-10;
  }

  .search-container--pinned {
    @apply pt-6 pb-4;
  }

  .results-container {
    @apply mx-auto max-w-md px-6 transition-all duration-500 ease-in-out;
  }

  .results-hidden {
    @apply opacity-0 translate-y-4;
  }

  .results-visible {
    @apply opacity-100 translate-y-0;
  }

  .app-footer {
    @apply mt-8 text-center text-xs;
    color: var(--muted-foreground);
  }
}

/* ============================================================
   COMPONENTS
============================================================ */

@layer components {
  /* Weather Card */
  .weather-card {
    @apply rounded-lg p-6 space-y-4;
    background-color: var(--card);
    color: var(--card-foreground);
    box-shadow: 0 10px 30px oklch(0 0 0 / 6%);
  }

  .weather-card__meta {
    color: var(--muted-foreground);
  }

  .weather-card__temp {
    @apply text-4xl font-semibold tracking-tight;
  }

  .weather-card__details {
    @apply grid grid-cols-2 gap-4 text-sm;
  }

  /* Weather Form (FINAL, FLEX-BASED) */
  .weather-form {
    background: var(--card);
    --control-height: 32px; /* ‚Üê tweak this */
    border-radius: 16px;
    padding: 16px;
    box-shadow: 0 8px 24px oklch(0 0 0 / 6%);
  }

  .weather-form__inner {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .weather-form__input-wrap {
    flex: 1;
  }

  .weather-form__input {
    height: 60px;
    padding: 0 18px;
    font-size: 1rem;
    border-radius: 14px;
    font-weight: 500;
    width: 100%;
    letter-spacing: 0.05px;
  }

  .weather-form__submit {
  height: var(--control-height);
  width: var(--control-height);
    flex-shrink: 0;

    border-radius: 8px;
    background: var(--primary);
    color: var(--primary-foreground);

    display: inline-flex;
    align-items: center;
    justify-content: center;

    transition: background 0.2s ease, transform 0.1s ease;
  }

  .weather-form__submit:hover:not(:disabled) {
    background: oklch(from var(--primary) calc(l - 0.05) c h);
  }

  .weather-form__submit:active:not(:disabled) {
    transform: translateY(1px);
  }

  .weather-form__submit:disabled {
    opacity: 0.4;
    cursor: not-allowed;
  }
}

/* ============================================================
   MAP
============================================================ */

.weather-map {
  background-color: var(--card);
  border: 1px solid var(--border);
  box-shadow: 0 12px 32px oklch(0 0 0 / 8%);
}

.weather-icon {
  filter: saturate(10.1) contrast(1.05);
}
